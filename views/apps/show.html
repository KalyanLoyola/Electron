<style>
  .app-download {
    background: {{app.goodColorOnWhite}};
    color: white !important;
  }

  .page-section a {
    color: {{app.goodColorOnWhite}};
  }
</style>

<section class="page-section">
  <nav class="row" aria-label="Breadcrumb">
    <ol>
      <li class="breadcrumb-item text-small"><a href="/apps">Apps</a></li>
      <li class="breadcrumb-item breadcrumb-item-selected text-small text-gray" aria-current="page">{{app.name}}</li>
    </ol>
  </nav>

  <header class="app-header">
    <div class="col-md-3 app-logo-container">
      <img class='app-logo' src='/node_modules/electron-apps/apps/{{app.slug}}/{{app.icon128}}' alt='{{app.name}}'>
    </div>

    <div class="col-md-9">
      <h1 class='app-name'>
        <a class="app-link" href="{{app.website}}">{{app.name}}</a>
      </h1>

      <p class="app-description">
        {{app.description}}
      </p>
    </div>
  </header>

  <section>
    <div class="col-md-3 my-3">
      <dl class="text-small border-bottom pb-3 my-3 lh-condensed">
        {{#if app.website}}
          <dt class="text-bold">Website</dt>
          <dd>
            <a href="{{app.website}}">{{app.website}}</a>
          </dd>
        {{/if}}
      </dl>

      {{#if app.repository}}
        <dl class="text-small border-bottom py-3 my-3 lh-condensed">
          <dt class="text-bold">Repository</dt>
          <dd>
            <a href="{{app.repository}}">{{app.repository}}</a>
          </dd>
        </dl>
      {{/if}}

      <dl class="text-small border-bottom py-3 my-3 lh-condensed">
        <dt class="text-bold">Category</dt>
        <dd>
          <a href="/apps?category={{app.categorySlug}}">{{app.category}}</a>
        </dt>
      </dl>

      {{#if app.latestRelease.assets}}
        <dl class="text-small border-bottom pb-3 my-3 lh-condensed">
          <dt class="text-bold">
            Downloads
          </dt>

          <dd>
            {{#each app.latestRelease.assets}}
              <a class="app-download {{this.platform}}" href="{{this.browser_download_url}}">{{this.name}}</a>
            {{/each}}

            <a href="{{app.latestRelease.html_url}}" id="view-all-downloads" style="opacity:0.7;font-size:80%;display:none;">View all {{app.latestRelease.assets.length}} files</a>
          </dd>
        </dl>
      {{/if}}

      {{#if app.keywords}}
        <dl class="text-small border-bottom pb-3 my-3 lh-condensed">
          <dt class="text-bold">Keywords</dt>
          <dd>
            {{#each app.keywords}}
              <a class="app-keyword" href="/apps?q={{this}}">{{this}}</a>
            {{/each}}
          </dd>
        </dl>
      {{/if}}

      {{#if app.license}}
        <dl class="text-small border-bottom pb-3 my-3 lh-condensed">
          <dt class="text-bold">License</dt>
          <dt>{{app.license}}</dd>
        </dl>
      {{/if}}

      <!-- {{#if app.locales}}
        <dl class="text-small border-bottom my-3 pb-3 lh-condensed">
          <dt class="text-bold">Languages</dt>
          <dd class="border-bottom pb-3 lh-condensed">
            {{#each app.locales}}
              {{this}}
            {{/each}}
          </dd>
        </dl>
      {{/if}} -->

      {{#if app.latestRelease}}
        <dl class="text-small border-bottom my-3 pb-3 lh-condensed">
          <dt class="text-bold">
            Latest Release
          </dt>

          <dd>
            <a href="{{app.latestRelease.html_url}}">
              {{app.latestRelease.name}}
              <span class="app-tagname">({{app.latestRelease.tag_name}})</span>
            </a>
          </dd>
        </dl>
      {{/if}}
    </div>

    <div class="col-md-9 my-3">
      {{#if app.readmeCleaned}}
        <div class="app-readme-wrapper">
          <a class="text-small readme-link" id="display-readme">
            View the {{app.name}} README...
          </a>

          <main id="readme" class="app-readme box-shadow-medium d-none text-small">
            {{{app.readmeCleaned}}}
          </main>
        </div>
      {{/if}}

      {{#if app.screenshots}}
        <div class="app-screenshots my-3">
          <div class="app-screenshot p-3" id="app-screenshot-container">
            <img src="{{app.screenshots.0.imageUrl}}" />
          </div>

          <div class="app-screenshot-thumbnail-container">
            {{#each app.screenshots}}
              <figure class="app-screenshot-thumbnail p-3">
                <a href="{{imageUrl}}">
                  <img src="{{imageUrl}}" />
                </a>
                {{#if caption}}
                  <figcaption class="screenshot-caption text-center">
                    {{caption}}
                  </figcaption>
                {{/if}}
              </figure>
            {{/each}}
          </div>
        </div>
      {{/if}}
    </div>
  </section>
</section>

<script>
  document.getElementById('display-readme').addEventListener('click', function(event) {
    this.classList.add('d-none');
    document.getElementById('readme').classList.remove('d-none');
  });
</script>
